<app-sign-in-layout>
  <div *ngIf="contentReady && !hasValidToken" class="pb-2">
    <div *ngIf="errors.length > 0"
      class="alert alert-danger alert-dismissible fade show m-alert m-alert--air m-alert--outline m-alert--outline-2x"
      role="alert">
      <span *ngFor="let error of errors">
        {{ error | translate }}
      </span>
    </div>
    <div *ngIf="successMessage.visible" role="alert"
      class="alert alert-success alert-dismissible fade show m-alert m-alert--air m-alert--outline m-alert--outline-2x">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"></button>
      {{ successMessage.text }}
    </div>
  </div>
  <form [hidden]="!contentReady || hasValidToken" class="sign-in-form" [formGroup]="signInForm">
    <div class="mb-2">
      <div class="col-12 sign-in-form-component">
        <app-form-input formControlName="email" [formControlField]="f.email" [required]="true"
          placeholder="{{'dictionary.email' | translate | titlecase }}" [hideMessages]="true">
        </app-form-input>
      </div>
    </div>
    <div class="pt-2 pb-4">
      <div class="col-12 sign-in-form-component">
        <app-form-input formControlName="password" [formControlField]="f.password" type="password" [required]="true"
          placeholder="{{'dictionary.password' | translate | titlecase }}" [hideMessages]="true">
        </app-form-input>
      </div>
    </div>
    <div class="d-flex justify-content-end">
      <button *ngIf="showResendEmailButton" class="btn btn-outline-info m-btn--custom sign-in-button" type="button"
        (click)="resendEmail()">
        {{ 'auth.labels.resend_email' | translate }}
      </button>
      <button class="btn btn-info m-btn--custom sign-in-button" type="submit" (click)="validateForm()">
        {{ 'auth.labels.sign_in' | translate }}
      </button>
    </div>
  </form>
  <ng-container *ngIf="contentReady && hasValidToken">
    <h3>{{ 'auth.labels.choose_account' | translate }}</h3>
    <div class="active-account d-flex align-items-center pl-3" (click)="onActiveAccountLogIn()">
      <i class="fa fa-user fa-2x active-account-icon"></i>
      <div>{{ userEmail }}</div>
    </div>
    <div class="align-items-center d-flex mt-3 another-account pl-2" (click)="onOtherAccountLogIn()">
      <div class="another-account-icon text-center"><i class="fa fa-plus"></i></div>
      <div class="pl-2">{{ 'auth.labels.use_another_account' | translate }}</div>
    </div>
  </ng-container>
</app-sign-in-layout>